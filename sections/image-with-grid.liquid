{{ 'section-image-with-grid.css' | asset_url | stylesheet_tag }}

<section
  id="shopify-section-{{ section.id }}"
  class="media-text-grid-section{% if section.settings.layout == 'text_first' %} reverse{% endif %}"
  style="
    background-color: {{ section.settings.bg_color }};
    color: {{ section.settings.text_color }};
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;
  "
>
  <div class="page-width">
    {% if section.settings.heading != blank %}
      <div
        class="media-text-grid__heading"
        style="text-align: {{ section.settings.heading_alignment }};"
      >
        {{ section.settings.heading }}
      </div>
    {% endif %}

    <div class="media-text-grid__container{% if section.settings.layout == 'text_first' %} reverse{% endif %}">
      <div class="media-text-grid__picture">
        {% if section.settings.image != blank %}
          {{ section.settings.image | image_url: width: 1500 | image_tag: class: 'media-text-grid__image', loading: 'lazy' }}
        {% else %}
          {{ 'image' | placeholder_svg_tag: 'media-text-grid__image placeholder-svg' }}
        {% endif %}
      </div>

      <div class="media-text-grid__text-grid">
        {% if section.blocks.size > 0 %}
          <div class="media-text-grid__grid">
            {% for block in section.blocks %}
              {% if block.type == 'text_block' %}
                <div class="media-text-grid__item" {{ block.shopify_attributes }}>
                  {% if block.settings.icon != blank %}
                    {{ block.settings.icon | image_url: width: 100 | image_tag: class: 'media-text-grid__icon', loading: 'lazy' }}
                  {% endif %}
                  {% if block.settings.text != blank %}
                    <div class="media-text-grid__text rte">{{ block.settings.text }}</div>
                  {% endif %}
                </div>
              {% endif %}
            {% endfor %}
          </div>

          <div class="media-text-grid__buttons">
            {% for block in section.blocks %}
              {% if block.type == 'button' %}
                <a
                  href="{{ block.settings.button_url }}"
                  class="button{% if block.settings.button_style == 'secondary' %} button--secondary{% endif %}"
                >
                  {{ block.settings.button_label }}
                </a>
              {% endif %}
            {% endfor %}
            {% if section.settings.guarantee_text != blank or section.settings.guarantee_image != blank %}
              <div class="media-text-grid__guarantee">
                {% if section.settings.guarantee_image != blank %}
                  {{ section.settings.guarantee_image | image_url: width: 100 | image_tag: class: 'media-text-grid__guarantee-image', loading: 'lazy' }}
                {% endif %}
                {% if section.settings.guarantee_text != blank %}
                  <div class="media-text-grid__guarantee-text rte">
                    {{ section.settings.guarantee_text }}
                  </div>
                {% endif %}
              </div>
            {% endif %}
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</section>


{% schema %}
{
  "name": "Media with Text Grid",
  "settings": [
    {
      "type": "richtext",
      "id": "heading",
      "label": "Heading"
    },
    {
      "type": "richtext",
      "id": "guarantee_text",
      "label": "Guarantee text"
    },
    {
      "type": "image_picker",
      "id": "guarantee_image",
      "label": "Guarantee image"
    },
    {
      "type": "select",
      "id": "heading_alignment",
      "label": "Heading alignment",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ],
      "default": "center"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Media"
    },
    {
      "type": "url",
      "id": "video_url",
      "label": "Video URL (MP4)"
    },
    {
      "type": "select",
      "id": "layout",
      "label": "Layout",
      "options": [
        { "value": "media_first", "label": "Media first" },
        { "value": "text_first", "label": "Text first" }
      ],
      "default": "media_first"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Padding top",
      "default": 50,
      "min": 0,
      "max": 120,
      "step": 5,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding bottom",
      "default": 50,
      "min": 0,
      "max": 120,
      "step": 5,
      "unit": "px"
    }
  ],
  "blocks": [
    {
      "type": "text_block",
      "name": "Text block",
      "settings": [
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Icon"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Text",
          "default": "<p><strong>Compliment Magnet </strong></p><p>Leaving a personal scent trail that gets compliment everytime.</p>"
        }
      ]
    },
    {
      "type": "button",
      "name": "Button",
      "settings": [
        {
          "type": "text",
          "id": "button_label",
          "label": "Button label",
          "default": "Try Today Risk Free"
        },
        {
          "type": "url",
          "id": "button_url",
          "label": "Button URL"
        },
        {
          "type": "select",
          "id": "button_style",
          "label": "Button style",
          "options": [
            { "value": "primary", "label": "Primary" },
            { "value": "secondary", "label": "Secondary" }
          ],
          "default": "primary"
        }
      ]
    }
  ],
  "max_blocks": 6,
  "presets": [
    {
      "name": "Media with Text Grid",
      "blocks": [
        { "type": "text_block" },
        { "type": "text_block" },
        { "type": "text_block" },
        { "type": "text_block" },
        { "type": "button" }
      ]
    }
  ]
}
{% endschema %}
